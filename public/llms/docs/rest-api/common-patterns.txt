# REST API: undefined
URL: /docs/rest-api/common-patterns
Source: content/docs/rest-api/common-patterns.mdx



---
title: Common Patterns
description: Frequently used workflows and code patterns for the Field Nation REST API.
icon: Workflow
---

Learn common integration patterns and workflows for typical use cases.

## Work Order Lifecycle Management

### Create → Publish → Monitor

Complete workflow for creating and publishing a work order:

```javascript
// 1. Create work order
const createWorkOrder = async () => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: 'Server Rack Installation',
        description: 'Install and configure 42U server rack',
        schedule: {
          service_window: {
            start: '2024-12-20T08:00:00Z',
            end: '2024-12-20T17:00:00Z'
          }
        },
        location: {
          address1: '100 Tech Blvd',
          city: 'Austin',
          state: 'TX',
          zip: '78701',
          country: 'US'
        },
        pay: { base: 300.00 }
      })
    }
  );
  
  const workOrder = await response.json();
  return workOrder.id;
};

// 2. Publish work order
const publishWorkOrder = async (workOrderId) => {
  await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/publish?access_token=${token}`,
    { method: 'POST' }
  );
};

// 3. Monitor status
const monitorWorkOrder = async (workOrderId) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}?access_token=${token}`
  );
  
  const workOrder = await response.json();
  console.log(`Status: ${workOrder.status.name}`);
  return workOrder.status.id;
};

// Usage
const workOrderId = await createWorkOrder();
await publishWorkOrder(workOrderId);

// Poll status every 30 seconds
setInterval(() => monitorWorkOrder(workOrderId), 30000);
```

---

## Filtering & Search

### Filter Work Orders by Status

```javascript
// Get all assigned work orders
const getAssignedWorkOrders = async () => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}&filter[assignment]=assigned`
  );
  
  return response.json();
};

// Get work orders by date range
const getWorkOrdersByDateRange = async (startDate, endDate) => {
  const params = new URLSearchParams({
    access_token: token,
    'filter[schedule][start]': startDate,
    'filter[schedule][end]': endDate
  });
  
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders?${params}`
  );
  
  return response.json();
};

// Get work orders by location
const getWorkOrdersByZip = async (zipCode, radiusMiles = 25) => {
  const params = new URLSearchParams({
    access_token: token,
    'filter[postal_code]': zipCode,
    'filter[location_radius]': radiusMiles
  });
  
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders?${params}`
  );
  
  return response.json();
};
```

---

### Pagination

Handle large result sets:

```javascript
const getAllWorkOrders = async () => {
  const allWorkOrders = [];
  let page = 1;
  const perPage = 100; // Max items per page
  
  while (true) {
    const response = await fetch(
      `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}&page=${page}&per_page=${perPage}`
    );
    
    const data = await response.json();
    
    if (!data.results || data.results.length === 0) {
      break; // No more results
    }
    
    allWorkOrders.push(...data.results);
    
    // Check if there are more pages
    if (data.results.length < perPage) {
      break;
    }
    
    page++;
  }
  
  return allWorkOrders;
};
```

---

## Managing Work Order Components

### Add Messages (Comments)

```javascript
const addMessage = async (workOrderId, message) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/messages?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        message: message,
        type: 'comment' // or 'instruction'
      })
    }
  );
  
  return response.json();
};

// Usage
await addMessage(12345, 'Please bring ladder and basic tools');
```

---

### Add Custom Fields

```javascript
const updateCustomField = async (workOrderId, customFieldId, value) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/custom_fields/${customFieldId}?access_token=${token}`,
    {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ value })
    }
  );
  
  return response.json();
};

// Usage
await updateCustomField(12345, 789, 'Reference Number: ABC-123');
```

---

### Add Tasks (Checklist)

```javascript
const addTask = async (workOrderId, taskData) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/tasks?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        label: taskData.label,
        description: taskData.description,
        required: taskData.required || false
      })
    }
  );
  
  return response.json();
};

// Usage
await addTask(12345, {
  label: 'Power on equipment',
  description: 'Verify all status LEDs are green',
  required: true
});
```

---

### Upload Attachments

```javascript
const uploadAttachment = async (workOrderId, file, folderId = null) => {
  const formData = new FormData();
  formData.append('file', file);
  if (folderId) {
    formData.append('folder_id', folderId);
  }
  
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/attachments?access_token=${token}`,
    {
      method: 'POST',
      body: formData
    }
  );
  
  return response.json();
};

// Usage (browser)
const fileInput = document.querySelector('input[type="file"]');
const file = fileInput.files[0];
await uploadAttachment(12345, file);
```

---

## Batch Operations

### Create Multiple Work Orders

```javascript
const createBulkWorkOrders = async (workOrders) => {
  const results = [];
  
  // Process in batches to respect rate limits
  const batchSize = 10;
  
  for (let i = 0; i < workOrders.length; i += batchSize) {
    const batch = workOrders.slice(i, i + batchSize);
    
    const promises = batch.map(wo =>
      fetch(
        `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(wo)
        }
      ).then(r => r.json())
    );
    
    const batchResults = await Promise.all(promises);
    results.push(...batchResults);
    
    // Small delay between batches
    if (i + batchSize < workOrders.length) {
      await new Promise(resolve => setTimeout(resolve, 1000));
    }
  }
  
  return results;
};
```

---

## Status Management

### Update Work Order Status

```javascript
const updateWorkOrderStatus = async (workOrderId, action) => {
  // Available actions: publish, approve, complete, etc.
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/${action}?access_token=${token}`,
    { method: 'POST' }
  );
  
  return response.json();
};

// Usage
await updateWorkOrderStatus(12345, 'publish'); // Draft → Published
await updateWorkOrderStatus(12345, 'approve'); // Work Done → Approved
```

---

### Monitor Multiple Work Orders

```javascript
const monitorWorkOrders = async (workOrderIds) => {
  const statuses = {};
  
  const promises = workOrderIds.map(async (id) => {
    const response = await fetch(
      `https://api-sandbox.fndev.net/api/rest/v2/workorders/${id}?access_token=${token}&columns=status`
    );
    
    const data = await response.json();
    statuses[id] = data.status.name;
  });
  
  await Promise.all(promises);
  return statuses;
};

// Usage
const statuses = await monitorWorkOrders([12345, 12346, 12347]);
console.log(statuses);
// { 12345: 'Assigned', 12346: 'Work Done', 12347: 'Published' }
```

---

## Assignment Management

### Assign to Specific Provider

```javascript
const assignProvider = async (workOrderId, userId) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/assignee?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        user: { id: userId }
      })
    }
  );
  
  return response.json();
};

// Usage
await assignProvider(12345, 67890);
```

---

### Route to Talent Pool

```javascript
const routeToTalentPool = async (workOrderId, talentPoolId) => {
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}/route?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        talent_pool_id: talentPoolId
      })
    }
  );
  
  return response.json();
};
```

---

## Using Templates

### Create Work Order from Template

```javascript
const createFromTemplate = async (templateId, overrides = {}) => {
  // First, get template details
  const templateResponse = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/templates/${templateId}?access_token=${token}`
  );
  
  const template = await templateResponse.json();
  
  // Merge template with overrides
  const workOrderData = {
    ...template,
    ...overrides,
    template_id: templateId
  };
  
  // Create work order
  const response = await fetch(
    `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(workOrderData)
    }
  );
  
  return response.json();
};

// Usage
const workOrder = await createFromTemplate(123, {
  schedule: {
    service_window: {
      start: '2024-12-20T09:00:00Z',
      end: '2024-12-20T17:00:00Z'
    }
  },
  location: {
    address1: '456 Custom St',
    city: 'Dallas',
    state: 'TX',
    zip: '75201'
  }
});
```

---

## Error Handling Patterns

### Retry with Exponential Backoff

```javascript
async function retryWithBackoff(fn, maxRetries = 3, baseDelay = 1000) {
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error) {
      const isLastAttempt = attempt === maxRetries - 1;
      
      // Don't retry on 4xx errors (client errors)
      if (error.status >= 400 && error.status < 500) {
        throw error;
      }
      
      if (isLastAttempt) {
        throw error;
      }
      
      // Exponential backoff: 1s, 2s, 4s, etc.
      const delay = baseDelay * Math.pow(2, attempt);
      console.log(`Retry attempt ${attempt + 1} after ${delay}ms`);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}

// Usage
const workOrder = await retryWithBackoff(
  () => fetch(`https://api-sandbox.fndev.net/api/rest/v2/workorders/12345?access_token=${token}`)
    .then(r => r.ok ? r.json() : Promise.reject({ status: r.status }))
);
```

---

## Performance Optimization

### Use Selective Columns

Request only needed fields to reduce payload size:

```javascript
// Get only essential fields
const response = await fetch(
  `https://api-sandbox.fndev.net/api/rest/v2/workorders?access_token=${token}&columns=id,title,status,schedule`
);

// Full work order details only when needed
const fullDetails = await fetch(
  `https://api-sandbox.fndev.net/api/rest/v2/workorders/12345?access_token=${token}`
);
```

---

### Cache Frequently Used Data

```javascript
const cache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5 minutes

async function getCachedData(key, fetcher) {
  const cached = cache.get(key);
  
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }
  
  const data = await fetcher();
  cache.set(key, { data, timestamp: Date.now() });
  
  return data;
}

// Usage
const workOrder = await getCachedData(
  `workorder-${workOrderId}`,
  () => fetch(`https://api-sandbox.fndev.net/api/rest/v2/workorders/${workOrderId}?access_token=${token}`)
    .then(r => r.json())
);
```